(()=>{let e=new URLSearchParams(location.search).get("id");e||(e=Math.floor(1e4*Math.random()+1e4),window.location.search=`id=${e}`);const t=new WebSocket('API_URL'),n=document.getElementById("editor"),o=document.getElementById("typingStatus"),i=document.getElementById("roomLink"),a=document.getElementById("copyBtn");let d;i.value=window.location.href,a.addEventListener("click",()=>{i.select(),document.execCommand("copy"),a.innerText="Copied!",setTimeout(()=>a.innerText="ðŸ“‹ Copy Link",2e3)}),t.onopen=()=>{},t.onmessage=e=>{"__typing__"===e.data?(o.innerText="Your buddy is typing...",clearTimeout(o.timeout),o.timeout=setTimeout(()=>{o.innerText=""},1e3)):n.value=e.data},n.addEventListener("input",()=>{t.send("__typing__"),clearTimeout(d),d=setTimeout(()=>{t.send(n.value)},300)})})();
